---
layout: post
title: redis知识点
date: 2019-10-28
keywords: 
top: 10
categories: 
    - redis
tags:
    - redis
---
# redis知识点
# 1.概述
- Redis是完全开源免费的，遵守BDD协议，是一个高性能的key-value数据库。

## 1.相对于其他key-value DB的特点
- 1.Redis支持数据持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载数据。
- 2.Redis不仅仅支持key-value类型的数据，同时还提供了list、set、zset、hash等数据结构的存储
- 3.Redis支持数据的备份，即master-slave模式的数据备份。

## 2.优势
- 性能极高。Redis能读的速度是110000次/s,写的速度是81000次/s 。
- 丰富的类型。Redis支持二进制案例的Strings、Lists、Hashes、Sets及Ordered Sets数据类型操作。
- 原子性。Redis的所有操作都是原子性的，意思就是要么执行成功要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，通过MULTI和EXEC指令包起来。

## 3.Redis与其他key-value存储有什么不同
- Redis有着为更为复杂的数据结构并提供原子性操作。
- Redis运行在内存中但是可以持久化到磁盘，所以在对不同的数据集进行高速读写时需要权衡内存，因为数据量不能大于硬件内存。
- 相对于磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样redis可以做很多内部复杂性很强的事情。在磁盘方面他们是紧凑的以追加的方式产生的，因此不需要进行随机访问。

# 2.redis key操作命令
- 用于管理redis的键

## 1.语法
```
redis 127.0.0.1:6379> COMMAND KEY_NAME
```
- 示例
```
redis 127.0.0.1:6379> SET test test
OK
redis 127.0.0.1:6379> DEL test
(integer) 1
```
## 2.Redis keys命令
命令|描述
-|-
DEL key|该命令用于在key存在时删除key
DUMP key|序列化给定key，并返回被序列化的值
EXISTS key|检查key是否存在
EXPIRE key seconds|给定key设置过期时间，单位秒
EXPIREAT key timestamp|EXPIREAT的作用和EXPRIR类型，用于key的设置过期时间。不同在于EXPIREAT命令接受的时间参数是UNIX时间戳（unix timestamp）
PEXPRIE key milliseconds|设置key的过期时间以毫秒计。
KEYS pattern|查找所有符合给定模式（pattern）的key
MOVE key db|将当前数据库的key移动到给定的数据库DB当中
PERSIST key|移除key的过期时间，key将持久保持。
PTTL key|以毫秒为单位返回key的剩余的过期时间。
TTL key|以秒为单位，返回给定key的剩余生存时间（TTL time to live）
RANDOMKEY|从当前数据库中随机返回一个
RENAME key newkey|修改key的名称
RENDMENX key newkey|仅当newkey不存在时，将key改为newkey
TYPE key|返回key所存储的值的类型。

# 3.数据类型
- string（字符串）、hash（哈希）、list（列表）、set（集合）zset（sorted set：有序集合）。

## 2.string(字符串)
- string是一个redis最基本的类型，可以理解为Memcached一模一样的类型，一个key对应一个value。
- string类型是二进制安全的。redis的string可以包含任何数据。比如jpg图片或者序列化的对象。
- string类型是Redis最基本的数据类型，string类型的值最大能存储512MB。

### 1.语法
- 基本语法
```
127.0.0.1:6379>COMMAND KEY_NAME
```
- 设置一个key为test，value为 test的键值对
```
127.0.0.1:6379> set test test
OK

// 取出
127.0.0.1:6379> get test
"test"
```
### 2.常用命令
命令|描述
-|-
SET key value|设置指定key的值
GET key|获取指定的key值
GETRANGE key start end|返回key中字符串值的子字符(截取)
GETSET key value|将给定key的值设为value，并返回key的旧值（old value）
GETBIT key offset|将key说存储的字符串子，获取指定偏移量上的位（bit）
MGET key1[key2...]|获取所有（一个或多个）给定的key的值
SETBIT key offset value|对key说存储的字符串值，设置或者清楚指定偏移量上的位（bit）
SETNX key value|只有在key不存在时设置key的值
SETRANGE key offset value|用value参数覆写给定key所存储的字符串值，从偏移量offset开始。
STRLEN key|返回key所存储的字符串值的长度
MSET key value[key value]|同时设置一个或多个key-value对。
MSETNX key value [key value....]|同时设置一个或者多个key-value对。
PSETEX key milliseconds value|这个命令和SETEX命令相似，但它以毫秒为单位设置key的生存空间，而不是像SETEX命令那样，以秒为单位。
INCR key|将key中存储的数字值增1
INCRBY key increment|将key所存储的值加上给定的增量值（increment）。
INCRBYFLOAT key increment|将key所存储的值加上给定的浮点增量值（increment）
DECR key|将key中存储的数字值减一。
DECRBY key decrement|key所存储的值减去给定的减量值（decrement）。
APPEND key value|如果key已经存在并且是一个字符串，APPEND命令将指定的value追加到该key原来值（value）的末尾。

## 2.哈希（Hash）
- hash是一个string类型的field和value的映射表，hash特别适合用于存储对象。
- redis每个hash可以存储2的32次方 - 1 个键值对（40多亿）

### 1.示例
```
127.0.0.1:6379> HMSET test2 name 'key' value value
OK
127.0.0.1:6379> HGET test2 name
"key"
127.0.0.1:6379> HMSET hashTest name hashTest value abcd
OK
127.0.0.1:6379> HGETALL hashTest
1) "name"
2) "hashTest"
3) "value"
4) "abcd"
127.0.0.1:6379> HGET hashTest value
"abcd"
```
### 2.hash命令

命令|描述
-|-
HDEL key field1 [field2]|删除一个或多个哈希表字段
HEXISTS key field|查看哈希表中，指定的key是否存在
HGET key field|获取存储在哈希表中指定字段的值
HGETALL key|获取在哈希表中指定key的所有字段和值
HINCRBY key field increment|为哈希表key中的指定字段的整数值加上增量increment
HINCRBYFLOAT key field increment|为哈希表key中的指定字段的浮点数值加上增量increment
HKEYS key|获取所有哈希表中的字段
HLEN key|获取hash表中的key的数量
HMGET key filed1 [field2....]|获取所有给定字段的值
HMSET key field1 value1 [field2 value2]|同时将多个field-value（域-值）对设置到哈希表key中。
HSET key field value|将哈希表key中的字段field的值设为value
HSETNX key field value|只有在字段不存在时，设置哈希表中的值
HVALS key|获取哈希表中所有值
HSCAN key cursor [MATCH pattern] [COUNT count]|迭代哈希表中的键值对

>如有侵权行为，请[点击这里](https://github.com/mattmengCooper/MattMeng_hexo/issues)联系我删除

>[如发现疑问或者错误点击反馈](https://github.com/mattmengCooper/MattMeng_hexo/issues)

# 备注

